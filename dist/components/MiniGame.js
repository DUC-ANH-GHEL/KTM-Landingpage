var{useState,useEffect,useRef}=React;function MiniGameModal(){const[r,d]=useState(0),[l,g]=useState({name:"",phone:""}),[s,c]=useState(""),[h,v]=useState(""),[f,n]=useState(!1),e=["KM10%","KM5%","FREESHIP","QUA-TANG","SALE2025","VIP2025","CODE123","GIAMGIA7"];useEffect(()=>{const i=setTimeout(()=>d(0),1500);return()=>clearTimeout(i)},[]);const t=i=>/^0\d{9}$/.test(i.trim()),a=()=>{u();const{name:i,phone:m}=l;if(!i||!m)return c("Vui l\xF2ng nh\u1EADp \u0111\u1EE7 th\xF4ng tin");if(!t(m))return c("S\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xF4ng h\u1EE3p l\u1EC7");c(""),d(2)},o=()=>e[Math.floor(Math.random()*e.length)],u=()=>{const i=o();v(i),d(3)},x=()=>{navigator.clipboard.writeText(h),d(4)};return r!==null&&React.createElement("div",{className:"modal-overlay-full"},React.createElement("canvas",{id:"confetti-canvas",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9999}}),React.createElement("div",{className:"modal-box p-4 bg-white rounded shadow position-relative"},React.createElement("button",{className:"btn-sm btn-danger position-absolute top-0 end-0 button-close-margin",onClick:()=>d(null)},"\xD7"),r===0&&React.createElement("div",{className:"text-center"},React.createElement("h4",{className:"fw-bold"},"\u{1F389} Xin ch\xFAc m\u1EEBng b\u1EA1n \u0111\u01B0\u1EE3c tham gia mini game"),React.createElement("p",null,"Quay tr\xFAng th\u01B0\u1EDFng \u2013 Nh\u1EADn ngay m\xE3 gi\u1EA3m gi\xE1 h\u1EA5p d\u1EABn"),React.createElement("button",{className:"btn btn-primary",onClick:()=>d(1)},"Ch\u01A1i ngay")),r===1&&React.createElement("div",null,React.createElement("h5",{className:"mb-3"},"X\xE1c th\u1EF1c th\xF4ng tin"),React.createElement("input",{className:"form-control mb-2",placeholder:"H\u1ECD t\xEAn",value:l.name,onChange:i=>g({...l,name:i.target.value})}),React.createElement("input",{className:"form-control mb-2",placeholder:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",value:l.phone,onChange:i=>g({...l,phone:i.target.value})}),s&&React.createElement("div",{className:"text-danger small mb-2"},s),React.createElement("button",{className:"btn btn-success w-100",onClick:a},"B\u1EAFt \u0111\u1EA7u ch\u01A1i")),r===2&&React.createElement(SlotMachine,{setStep:d,formData:l}),r===3&&React.createElement(ScratchCard,{code:h,onDone:()=>n(!0)}),r===3&&f&&React.createElement("div",{className:"text-center mt-3"},React.createElement("p",{className:"fw-bold"},"\u{1F381} M\xE3 c\u1EE7a b\u1EA1n: ",React.createElement("span",{className:"text-success"},h)),React.createElement("button",{className:"btn btn-primary",onClick:x},"Sao ch\xE9p m\xE3")),r===4&&React.createElement("div",{className:"text-center"},React.createElement("h5",null,"\u2705 Ho\xE0n t\u1EA5t"),React.createElement("p",null,"C\u1EA3m \u01A1n b\u1EA1n! H\xE3y chia s\u1EBB \u0111\u1EC3 nh\u1EADn th\xEAm qu\xE0"),React.createElement("div",{className:"d-flex justify-content-center gap-2 mt-3"},React.createElement("a",{href:"https://facebook.com/sharer/sharer.php",target:"_blank",className:"btn btn-sm btn-primary"},"Facebook"),React.createElement("a",{href:"https://zalo.me/share",target:"_blank",className:"btn btn-sm btn-success"},"Zalo")))))}function SlotMachine({setStep:r,formData:d}){const[l,g]=React.useState(!1),[s,c]=React.useState(["","",""]),[h,v]=React.useState(null),[f,n]=React.useState(0),[e,t]=React.useState({fb:!1,tiktok:!1,youtube:!1}),a=6,o=3,u=(e.fb?1:0)+(e.tiktok?1:0)+(e.youtube?1:0),x=Math.min(a,o+u),i=Math.max(0,x-f),m=[{name:"\u{1F34E}",image:"1.jpg",prize:"Gi\u1EA3m 50K ph\xED v\u1EADn chuy\u1EC3n"},{name:"\u{1F34B}",image:"51.jpg",prize:"Gi\u1EA3m 100K ph\xED v\u1EADn chuy\u1EC3n"},{name:"\u{1F349}",image:"van1.png",prize:"Gi\u1EA3m 150K ph\xED v\u1EADn chuy\u1EC3n"},{name:"\u{1F347}",image:"van2.png",prize:"Gi\u1EA3m 200K ph\xED v\u1EADn chuy\u1EC3n"},{name:"\u{1F604}",image:"61.jpg",prize:"Gi\u1EA3m 250K ph\xED v\u1EADn chuy\u1EC3n"},{name:"\u260E\uFE0F",image:"71.jpg",prize:"Gi\u1EA3m 300K ph\xED v\u1EADn chuy\u1EC3n"}],N=async y=>{let b;if(y){const p=m[Math.floor(Math.random()*m.length)];b=[p,p,p]}else{const p=m.sort(()=>.5-Math.random());b=[p[0],p[1],p[2]]}if(c(b),n(p=>p+1),g(!1),b[0].name===b[1].name&&b[1].name===b[2].name){const p=b[0].prize;v(`\u{1F389} Xin ch\xFAc m\u1EEBng b\u1EA1n \u0111\xE3 tr\xFAng: ${p}! Vui l\xF2ng li\xEAn h\u1EC7 fb ho\u1EB7c zalo \u0111\u1EC3 nh\u1EADn th\u01B0\u1EDFng nh\xE9 b\u1EA1n`);const z=document.getElementById("confetti-canvas");if(z&&typeof confetti!="undefined"){const k=confetti.create(z,{resize:!0,useWorker:!0});for(let w=0;w<25;w++)setTimeout(()=>{k({particleCount:100,spread:70,origin:{x:Math.random(),y:Math.random()*.6}})},w*1e3)}try{await fetch("https://sheetdb.io/api/v1/br3yxz6v6al06",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:{Name:d.name,Phone:d.phone,Gift:p}})})}catch(k){console.error("L\u1ED7i khi l\u01B0u v\xE0o sheet:",k)}setTimeout(()=>r(null),25e3)}else v("\u{1F494} Kh\xF4ng tr\xFAng th\u01B0\u1EDFng, th\u1EED l\u1EA1i nh\xE9!")},S=()=>{if(l||i<=0)return;g(!0),v(null);const y=f===a-1,b=setInterval(()=>{const p=Array(3).fill().map(()=>m[Math.floor(Math.random()*m.length)]);c(p),(Math.random()<.05||y)&&(clearInterval(b),N(y))},100)},M=y=>{if(e[y])return;t(p=>({...p,[y]:!0}));const b={fb:"https://facebook.com/profile.php?id=61574648098644",tiktok:"https://www.tiktok.com/@nongcubaduc",youtube:"https://www.youtube.com/@nongcubaduc"};window.open(b[y],"_blank")};return React.createElement("div",{className:"text-center my-5"},React.createElement("h4",{className:"mb-3"},"\u{1F3B0} Quay s\u1ED1 may m\u1EAFn"),React.createElement("p",{className:"text-muted"},"L\u01B0\u1EE3t quay c\xF2n l\u1EA1i: ",React.createElement("strong",null,i),"/3"),React.createElement("div",{className:"d-flex justify-content-center align-items-center gap-3 mb-3"},s.map((y,b)=>React.createElement("div",{key:b,className:"border p-2 rounded shadow",style:{width:80,height:80,background:"#fff"}},y&&React.createElement("img",{src:y.image,alt:y.name,style:{width:"100%",height:"100%",objectFit:"contain"}})))),React.createElement("button",{className:"btn btn-danger px-4",onClick:S,disabled:l||i<=0},l?"\u0110ang quay...":"Quay s\u1ED1"),h&&React.createElement("p",{className:"mt-3 fw-bold text-success"},h),f>=o&&x<a&&React.createElement("div",{className:"mt-4"},React.createElement("p",null,React.createElement("strong",null,"H\u1EBFt l\u01B0\u1EE3t quay mi\u1EC5n ph\xED.")," H\xE3y theo d\xF5i \u0111\u1EC3 nh\u1EADn th\xEAm l\u01B0\u1EE3t:"),React.createElement("div",{className:"d-flex justify-content-center gap-3"},!e.fb&&React.createElement("button",{className:"btn btn-outline-primary",onClick:()=>M("fb")},React.createElement("i",{className:"fab fa-facebook"})," Facebook"),!e.youtube&&React.createElement("button",{className:"btn btn-outline-danger",onClick:()=>M("youtube")},React.createElement("i",{className:"fab fa-youtube"})," YouTube"),!e.tiktok&&React.createElement("button",{className:"btn btn-outline-dark",onClick:()=>M("tiktok")},React.createElement("i",{className:"fab fa-tiktok"})," TikTok"))))}function ScratchCard({code:r,onDone:d}){const l=React.useRef(null),g=React.useRef(null);return React.useEffect(()=>{const s=l.current,c=s.getContext("2d"),h=g.current.offsetWidth,v=g.current.offsetHeight;s.width=h,s.height=v,c.fillStyle="#ccc",c.fillRect(0,0,h,v),c.globalCompositeOperation="destination-out";const f=(t,a)=>{c.beginPath(),c.arc(t,a,20,0,Math.PI*2),c.fill()};let n=!1;const e=t=>{if(!n)return;const a=s.getBoundingClientRect(),o=t.touches?t.touches[0].clientX:t.clientX,u=t.touches?t.touches[0].clientY:t.clientY,x=o-a.left,i=u-a.top;f(x,i)};return s.addEventListener("mousedown",()=>n=!0),s.addEventListener("mouseup",()=>n=!1),s.addEventListener("mousemove",e),s.addEventListener("touchstart",()=>n=!0),s.addEventListener("touchend",()=>n=!1),s.addEventListener("touchmove",e),()=>{s.removeEventListener("mousemove",e),s.removeEventListener("touchmove",e)}},[]),React.createElement("div",{className:"text-center"},React.createElement("h5",{className:"mb-3"},"\u{1F381} C\xE0o \u0111\u1EC3 nh\u1EADn m\xE3 khuy\u1EBFn m\xE3i"),React.createElement("div",{ref:g,style:{width:280,height:120,position:"relative",margin:"0 auto"}},React.createElement("div",{className:"position-absolute top-50 start-50 translate-middle fw-bold fs-4 z-1 text-dark",style:{zIndex:1}},r),React.createElement("canvas",{ref:l,style:{position:"absolute",top:0,left:0,borderRadius:8,width:"100%",height:"100%",zIndex:2}})),React.createElement("button",{className:"btn btn-outline-success mt-3",onClick:()=>{navigator.clipboard.writeText(r),d()}},"Sao ch\xE9p m\xE3"))}function LuckyWheel(){const[r,d]=React.useState(!1),[l,g]=React.useState(0),[s,c]=React.useState(null),[h,v]=React.useState(null),f=[{label:"Gi\u1EA3m 10%",color:"#f44336"},{label:"Freeship",color:"#2196f3"},{label:"Voucher 50k",color:"#ff9800"},{label:"Kh\xF4ng tr\xFAng",color:"#9e9e9e"},{label:"T\u1EB7ng qu\xE0",color:"#4caf50"},{label:"Gi\u1EA3m 5%",color:"#e91e63"}],n=150,e=360/f.length,t=()=>{if(r)return;const o=a(f.length),u=o*e+e/2,i=360*5+(270-u);c(o),g(m=>m+i),d(!0),setTimeout(()=>{v(f[o].label),d(!1)},4e3)},a=o=>{const u=[2,10,1,1,2,1],x=u.reduce((m,N)=>m+N,0);let i=Math.random()*x;for(let m=0;m<u.length;m++){if(i<u[m])return m;i-=u[m]}return 0};return React.createElement("div",{className:"text-center"},React.createElement("h4",{className:"mb-3"},"\u{1F3A1} V\xF2ng quay may m\u1EAFn"),React.createElement("div",{className:"position-relative d-inline-block",style:{width:n*2,height:n*2}},React.createElement("svg",{width:n*2,height:n*2,style:{transform:`rotate(${l}deg)`,transition:r?"transform 4s ease-out":"none"}},f.map((o,u)=>{const x=e*u,i=e*(u+1),m=n+n*Math.cos(Math.PI*x/180),N=n+n*Math.sin(Math.PI*x/180),S=n+n*Math.cos(Math.PI*i/180),M=n+n*Math.sin(Math.PI*i/180),y=e>180?1:0,b=`
              M ${n} ${n}
              L ${m} ${N}
              A ${n} ${n} 0 ${y} 1 ${S} ${M}
              Z
            `,p=x+e/2,z=n+n/1.8*Math.cos(Math.PI*p/180),k=n+n/1.8*Math.sin(Math.PI*p/180);return React.createElement("g",{key:u},React.createElement("path",{d:b,fill:o.color}),React.createElement("text",{x:z,y:k,textAnchor:"middle",dominantBaseline:"middle",fill:"#fff",fontSize:"14",transform:`rotate(${p}, ${z}, ${k})`},o.label))})),React.createElement("div",{className:"position-absolute start-50 translate-middle-x",style:{top:"-20px",width:0,height:0,borderLeft:"15px solid transparent",borderRight:"15px solid transparent",borderTop:"30px solid black",zIndex:10}})),React.createElement("button",{className:"btn btn-danger mt-4",onClick:t,disabled:r},r?"\u0110ang quay...":"Quay ngay"),h&&React.createElement("div",{className:"alert alert-success mt-3"},"\u{1F389} ",React.createElement("strong",null,"B\u1EA1n nh\u1EADn \u0111\u01B0\u1EE3c:")," ",React.createElement("span",{className:"text-primary"},h)))}function MemoryMatchGame({onWin:r}){const d=["van1.png","van2.png","van3.png","1.jpg","van4.png","3.jpg","51.jpg","61.jpg"],[l,g]=React.useState([]),[s,c]=React.useState([]),[h,v]=React.useState([]),[f,n]=React.useState(0);React.useEffect(()=>{const a=[...d,...d].sort(()=>.5-Math.random()).map((o,u)=>({id:u,img:o}));g(a)},[]),React.useEffect(()=>{if(s.length===2){const[t,a]=s;l[t].img===l[a].img?(v([...h,l[t].img]),c([]),h.length+1===d.length&&setTimeout(()=>r(),800)):setTimeout(()=>c([]),1e3),n(o=>o+1)}},[s]);const e=t=>{s.length<2&&!s.includes(t)&&!h.includes(l[t].img)&&c([...s,t])};return React.createElement("div",{className:"text-center"},React.createElement("h5",{className:"mb-3"},"\u{1F9E0} Memory Match \u2013 T\xECm 2 th\u1EBB gi\u1ED1ng nhau \u0111\u1EC3 nh\u1EADn m\xE3 \u01B0u \u0111\xE3i"),React.createElement("div",{className:"row row-cols-4 g-2 justify-content-center",style:{maxWidth:"400px",margin:"0 auto"}},l.map((t,a)=>{const o=s.includes(a)||h.includes(t.img);return React.createElement("div",{key:t.id,className:"col"},React.createElement("div",{className:"memory-card border rounded",style:{width:"70px",height:"70px",background:"#eee",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>e(a)},o?React.createElement("img",{src:t.img,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"}}):"\u2753"))})),React.createElement("p",{className:"mt-3 small"},"L\u01B0\u1EE3t ch\u01A1i: ",f))}function PuzzleBoard({image:r,onComplete:d}){const[g,s]=React.useState([]),[c,h]=React.useState(3*3-1);React.useEffect(()=>{const e=[...Array(9).keys()],t=v(e);s(t),h(t.indexOf(3*3-1))},[]);const v=e=>{const t=[...e];for(let a=t.length-2;a>0;a--){const o=Math.floor(Math.random()*(a+1));[t[a],t[o]]=[t[o],t[a]]}return t},f=e=>{const t=[...g];[t[e],t[c]]=[t[c],t[e]],s(t),h(e),t.every((a,o)=>a===o)&&setTimeout(()=>d(),500)},n=e=>{const t=Math.floor(e/3),a=e%3,o=Math.floor(c/3),u=c%3;return Math.abs(t-o)+Math.abs(a-u)===1};return React.createElement("div",{className:"text-center"},React.createElement("h5",{className:"mb-3"},"\u{1F9E9} X\u1EBFp h\xECnh ho\xE0n ch\u1EC9nh \u0111\u1EC3 nh\u1EADn \u01B0u \u0111\xE3i"),React.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 80px)",gap:"2px",justifyContent:"center"}},g.map((e,t)=>React.createElement("div",{key:t,onClick:()=>n(t)&&f(t),style:{width:80,height:80,backgroundColor:e===3*3-1?"#eee":"transparent",backgroundImage:e===3*3-1?"none":`url(${r})`,backgroundSize:`${3*80}px ${3*80}px`,backgroundPosition:`${-(e%3)*80}px ${-Math.floor(e/3)*80}px`,border:"1px solid #ccc",cursor:n(t)?"pointer":"default"}}))))}

