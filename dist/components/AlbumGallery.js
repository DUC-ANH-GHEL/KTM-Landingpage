const ALBUM_API_BASE="";function AlbumGallery(){var{useState:a,useEffect:f,useRef:E}=React;const[c,b]=a([]),[x,g]=a(!0),[N,p]=a(null),[s,o]=a(null),[i,h]=a(null),[m,n]=a(null),[k,C]=a(""),[A,r]=a(!1),[d,v]=a(""),[y,w]=a(!1);f(()=>{let e=!0;async function t(){try{g(!0);const l=await fetch(`${ALBUM_API_BASE}/api/albums`);if(!l.ok)throw new Error("Kh\xF4ng th\u1EC3 t\u1EA3i danh s\xE1ch album");const u=await l.json();e&&(b(u),p(null))}catch(l){console.error("Load albums error:",l),e&&(p("Kh\xF4ng th\u1EC3 t\u1EA3i th\u01B0 vi\u1EC7n \u1EA3nh"),b([]))}finally{e&&g(!1)}}return t(),()=>{e=!1}},[]),f(()=>{if(!s){h(null);return}let e=!0;async function t(){try{w(!0);const l=await fetch(`${ALBUM_API_BASE}/api/albums/${s}`);if(!l.ok)throw new Error("Kh\xF4ng th\u1EC3 t\u1EA3i album");const u=await l.json();e&&h(u)}catch(l){if(console.error("Load album detail error:",l),e){const u=c.find(j=>j.id===s);h(u||null)}}finally{e&&w(!1)}}return t(),()=>{e=!1}},[s,c]),f(()=>{const e=t=>{t.key==="Escape"&&(m?n(null):s?o(null):r(!1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,s]);const L=c.slice(0,4);return x?React.createElement("section",{className:"album-gallery-section py-5 bg-white"},React.createElement("div",{className:"container text-center"},React.createElement("div",{className:"spinner-border text-primary",role:"status"},React.createElement("span",{className:"visually-hidden"},"\u0110ang t\u1EA3i...")),React.createElement("p",{className:"mt-2 text-muted"},"\u0110ang t\u1EA3i th\u01B0 vi\u1EC7n \u1EA3nh..."))):N&&c.length===0?React.createElement("section",{className:"album-gallery-section py-5 bg-white"},React.createElement("div",{className:"container text-center"},React.createElement("div",{className:"alert alert-warning"},React.createElement("i",{className:"fas fa-exclamation-triangle me-2"}),N))):c.length===0?React.createElement("section",{className:"album-gallery-section py-5 bg-white"},React.createElement("div",{className:"container text-center"},React.createElement("p",{className:"text-muted"},"Ch\u01B0a c\xF3 album n\xE0o trong th\u01B0 vi\u1EC7n."))):React.createElement("section",{className:"album-gallery-section py-5 bg-white"},React.createElement("div",{className:"container"},React.createElement("div",{className:"mb-3"},React.createElement("h3",{className:"fw-bold"},"\u{1F527} Th\u01B0 vi\u1EC7n l\u1EAFp \u0111\u1EB7t th\u1EF1c t\u1EBF"),React.createElement("p",{className:"text-muted small mb-0"},'\u1EA2nh th\u1EADt kh\xE1ch g\u1EEDi \u2014 ch\u1ECDn theo lo\u1EA1i m\xE1y ho\u1EB7c s\u1EA3n ph\u1EA9m. Click "Xem to\xE0n b\u1ED9" \u0111\u1EC3 m\u1EDF th\u01B0 vi\u1EC7n.')),React.createElement("div",{className:"row g-3 align-items-stretch mb-3"},L.map(e=>{var t;return React.createElement("div",{key:e.id,className:"col-6 col-md-3"},React.createElement("div",{className:"card shadow-sm h-100 album-preview clickable",role:"button",onClick:()=>{o(e.id),r(!0)}},React.createElement("div",{style:{overflow:"hidden",height:140,display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("img",{src:e.cover,alt:e.title,loading:"lazy",className:"img-fluid",style:{maxHeight:"140px",objectFit:"cover",width:"100%"}})),React.createElement("div",{className:"card-body py-2 px-3"},React.createElement("div",{className:"d-flex justify-content-between align-items-center"},React.createElement("div",{className:"small fw-semibold"},e.title),React.createElement("div",{className:"badge bg-primary"},e.count||((t=e.images)==null?void 0:t.length)||0)),React.createElement("div",{className:"small text-muted"},"Click \u0111\u1EC3 xem"))))})),React.createElement("div",{className:"text-center mb-4"},React.createElement("button",{className:"btn btn-success btn-lg",onClick:()=>{o(null),r(!0)}},React.createElement("i",{className:"fas fa-images me-2"})," Xem to\xE0n b\u1ED9 album")),A&&React.createElement("div",{className:"album-modal-overlay",role:"dialog","aria-modal":"true","aria-label":"Th\u01B0 vi\u1EC7n h\xECnh \u1EA3nh"},React.createElement("div",{className:"album-modal-content"},!s&&React.createElement(React.Fragment,null,React.createElement("div",{className:"d-flex align-items-center justify-content-between mb-3"},React.createElement("h5",{className:"m-0"},React.createElement("i",{className:"fas fa-folder-open me-2"}),"Ch\u1ECDn th\u01B0 m\u1EE5c"),React.createElement("button",{className:"btn btn-light btn-sm",onClick:()=>{r(!1),n(null)}},React.createElement("i",{className:"fas fa-times"})," \u0110\xF3ng")),React.createElement("div",{className:"row g-3"},c.map(e=>{var t;return React.createElement("div",{key:e.id,className:"col-6 col-md-4"},React.createElement("div",{className:"card shadow-sm h-100 album-folder-card clickable",role:"button",onClick:()=>o(e.id)},React.createElement("div",{style:{overflow:"hidden",height:160,display:"flex",alignItems:"center",justifyContent:"center"}},React.createElement("img",{src:e.cover,alt:e.title,loading:"lazy",className:"img-fluid",style:{maxHeight:"160px",objectFit:"cover",width:"100%"}})),React.createElement("div",{className:"card-body py-2 px-3 text-center"},React.createElement("div",{className:"fw-semibold"},React.createElement("i",{className:"fas fa-folder text-warning me-2"}),e.title),React.createElement("div",{className:"small text-muted"},e.count||((t=e.images)==null?void 0:t.length)||0," \u1EA3nh"))))}))),s&&y&&React.createElement("div",{className:"text-center py-5"},React.createElement("div",{className:"spinner-border text-primary",role:"status"},React.createElement("span",{className:"visually-hidden"},"\u0110ang t\u1EA3i...")),React.createElement("p",{className:"mt-2 text-muted"},"\u0110ang t\u1EA3i \u1EA3nh...")),s&&!y&&i&&React.createElement(React.Fragment,null,React.createElement("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2"},React.createElement("div",{className:"d-flex gap-2 align-items-center flex-wrap"},React.createElement("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>{o(null),v("")}},React.createElement("i",{className:"fas fa-arrow-left me-1"})," Quay l\u1EA1i"),React.createElement("h5",{className:"m-0"},React.createElement("i",{className:"fas fa-folder-open text-warning me-2"}),i.title),React.createElement("small",{className:"text-muted"},"(",i.images.length," \u1EA3nh)")),React.createElement("button",{className:"btn btn-light btn-sm",onClick:()=>{r(!1),o(null),n(null),v("")}},React.createElement("i",{className:"fas fa-times"})," \u0110\xF3ng")),React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"input-group input-group-sm"},React.createElement("span",{className:"input-group-text"},React.createElement("i",{className:"fas fa-search"})),React.createElement("input",{type:"text",className:"form-control",placeholder:"T\xECm theo ghi ch\xFA (VD: L1501, van 3 tay...)",value:d,onChange:e=>v(e.target.value)}),d&&React.createElement("button",{className:"btn btn-outline-secondary",onClick:()=>v("")},React.createElement("i",{className:"fas fa-times"})))),React.createElement("div",{className:"album-masonry"},i.images.filter(e=>{if(!d)return!0;const t=d.toLowerCase();return(e.caption||"").toLowerCase().includes(t)}).map((e,t)=>React.createElement("div",{key:t,className:"album-masonry-item"},React.createElement("img",{src:e.src,alt:e.caption||`${i.title} ${t+1}`,loading:"lazy",onClick:()=>{n(e.src),C(e.caption||"")},className:"img-fluid rounded clickable"}),React.createElement("div",{className:"caption small text-muted mt-1"},e.caption)))),React.createElement("div",{className:"mt-3"},React.createElement("div",{className:"small text-muted"},"Hi\u1EC3n th\u1ECB ",i.images.filter(e=>!d||(e.caption||"").toLowerCase().includes(d.toLowerCase())).length," / ",i.images.length," \u1EA3nh \u2014 B\u1ED9 s\u01B0u t\u1EADp: ",i.title)))),m&&typeof ImageModal=="function"?React.createElement(ImageModal,{src:m,onClose:()=>n(null)}):m?React.createElement("div",{className:"image-fallback-modal",onClick:()=>n(null)},React.createElement("img",{src:m,alt:k,className:"img-fluid rounded"}),React.createElement("button",{className:"btn-close",onClick:()=>n(null)},"\xD7")):null)))}

